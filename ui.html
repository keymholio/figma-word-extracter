<style>
  body {
    font-family: sans-serif;
    padding: 20px;
  }
  input, textarea {
    width: 100%;
    margin-bottom: 10px;
  }
  button {
    width: 100%;
    padding: 8px;
    margin-bottom: 10px;
  }
  #output {
    height: 200px;
  }
</style>

<input id="frame-names" type="text" placeholder="Frame names to extract (comma-separated)">
<input id="skip-instances" type="text" placeholder="Component instances to skip (comma-separated)">
<button id="extract-button">Extract Text</button>
<div id="status"></div>
<textarea id="output" readonly></textarea>

<script>
document.getElementById('extract-button').onclick = () => {
  const frameNames = document.getElementById('frame-names').value
    .split(',')
    .map(s => s.trim())
    .filter(s => s !== '');
  
  const skipInstances = document.getElementById('skip-instances').value
    .split(',')
    .map(s => s.trim())
    .filter(s => s !== '');

  parent.postMessage({ 
    pluginMessage: { 
      type: 'extract-text', 
      frameNames: frameNames,
      skipComponentInstances: skipInstances 
    } 
  }, '*');
};

onmessage = (event) => {
  const msg = event.data.pluginMessage;
  if (msg.type === 'extracted-text') {
    document.getElementById('output').value = msg.text;
    document.getElementById('status').textContent = 'Text extracted and copied!';
    navigator.clipboard.writeText(msg.text);
  } else if (msg.type === 'error') {
    document.getElementById('status').textContent = msg.message;
  }
};
</script>